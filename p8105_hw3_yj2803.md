Homework 3
================
Yuki Joyama
2023-10-05

# Problem 1

**Data import setup**

``` r
library(p8105.datasets)
data("instacart") # call instacart data from the library 
```

The instacart data has 1384617 rows and 15 columns. Some key variables
include order_id, product_id, user_id, product_name, etc.

**Examples of observations in instacart dataset**

``` r
head(instacart, n = 8) |> 
  knitr::kable(digits = 1) # include table in the md file
```

| order_id | product_id | add_to_cart_order | reordered | user_id | eval_set | order_number | order_dow | order_hour_of_day | days_since_prior_order | product_name                                  | aisle_id | department_id | aisle                | department   |
|---------:|-----------:|------------------:|----------:|--------:|:---------|-------------:|----------:|------------------:|-----------------------:|:----------------------------------------------|---------:|--------------:|:---------------------|:-------------|
|        1 |      49302 |                 1 |         1 |  112108 | train    |            4 |         4 |                10 |                      9 | Bulgarian Yogurt                              |      120 |            16 | yogurt               | dairy eggs   |
|        1 |      11109 |                 2 |         1 |  112108 | train    |            4 |         4 |                10 |                      9 | Organic 4% Milk Fat Whole Milk Cottage Cheese |      108 |            16 | other creams cheeses | dairy eggs   |
|        1 |      10246 |                 3 |         0 |  112108 | train    |            4 |         4 |                10 |                      9 | Organic Celery Hearts                         |       83 |             4 | fresh vegetables     | produce      |
|        1 |      49683 |                 4 |         0 |  112108 | train    |            4 |         4 |                10 |                      9 | Cucumber Kirby                                |       83 |             4 | fresh vegetables     | produce      |
|        1 |      43633 |                 5 |         1 |  112108 | train    |            4 |         4 |                10 |                      9 | Lightly Smoked Sardines in Olive Oil          |       95 |            15 | canned meat seafood  | canned goods |
|        1 |      13176 |                 6 |         0 |  112108 | train    |            4 |         4 |                10 |                      9 | Bag of Organic Bananas                        |       24 |             4 | fresh fruits         | produce      |
|        1 |      47209 |                 7 |         0 |  112108 | train    |            4 |         4 |                10 |                      9 | Organic Hass Avocado                          |       24 |             4 | fresh fruits         | produce      |
|        1 |      22035 |                 8 |         1 |  112108 | train    |            4 |         4 |                10 |                      9 | Organic Whole String Cheese                   |       21 |            16 | packaged cheese      | dairy eggs   |

The above example shows detailed information about `order_id` = 1. As we
can see from the table, `order_id` is tied to specific IDs which
identify product, user, aisle and department. From `product_name`, we
can tell what the user got for this order. `order_number` = 4 means that
this was the 4th order from this customer. `order_dow`,
`order_hour_of_day`, and `days_since_prior` tell us that this order was
placed on the 4th week, between 10 am to 11 am, and 9 days since the
last order. `reordered` is recorded as 1 if the product has been ordered
by this user in the past, and 0 otherwise.

``` r
# summarize aisle data
df_aisles <- instacart |> 
  group_by(aisle_id, aisle) |> 
  summarise(count = n())  # count how many times aisle_id were recorded in the dataset for each id (= the number of items ordered from each aisle)

max_aisle <- max(pull(df_aisles, count)) # check maximum count of aisles

df_aisles_max <- df_aisles |> 
  filter(count == max_aisle) # filter by the maximum count of aisles
```

134 aisles are in this dataset, and **fresh vegetables** are the most
items (in total 150609 items) ordered from.

``` r
# make a plot (the number of items ordered in each aisle)
df_aisles |> 
  filter(count > 10000) |> # just show aisles with more than 10000 items 
  ggplot(aes(x = reorder(aisle, count), y = count)) + 
  geom_bar(stat = "identity") +
  theme(axis.text.x = element_text(angle = 90)) +
  labs(
    title = "Items by aisle",
    x = "Aisle",
    y = "Item count",
    caption = "Only showing aisles with more than 10000 items ordered; sorted in an ascending order"
  )
```

![](p8105_hw3_yj2803_files/figure-gfm/unnamed-chunk-4-1.png)<!-- -->
